<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Recados</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --success-color: #2ecc71;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .area {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        #admin-panel { display: none; }
        
        h2 { color: var(--primary-color); margin-bottom: 15px; }
        
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .btn-primary { background: var(--primary-color); color: white; }
        .btn-success { background: var(--success-color); color: white; }
        .btn-danger { background: var(--danger-color); color: white; }
        .btn-warning { background: var(--warning-color); color: white; }
        
        input {
            padding: 10px;
            margin: 5px 0;
            width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .recado-item {
            border-bottom: 1px solid #eee;
            padding: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .message {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .message-success { background: #eaffea; color: var(--success-color); }
        .message-error { background: #ffeaea; color: var(--danger-color); }
        
        @media (max-width: 600px) {
            .recado-item { flex-direction: column; align-items: flex-start; }
            .recado-actions { margin-top: 10px; }
        }
    </style>
</head>
<body>
    <div class="area">
        <h2>üåê Recados P√∫blicos</h2>
        <div id="public-message"></div>
        <div id="public-recados-list">Carregando...</div>
        <button class="btn-primary" onclick="loadRecados()">Atualizar</button>
    </div>

    <div class="area" id="login-form">
        <h2>üîë Login Admin</h2>
        <div id="login-message"></div>
        <input type="text" id="username" placeholder="Usu√°rio">
        <input type="password" id="password" placeholder="Senha">
        <button class="btn-primary" onclick="doLogin()">Entrar</button>
        <p><small>Use: admin / 123456</small></p>
    </div>

    <div class="area" id="admin-panel">
        <h2>üõ†Ô∏è Painel Admin</h2>
        <div id="admin-message"></div>
        
        <h3>Adicionar Recado</h3>
        <input type="text" id="new-recado-text" placeholder="Digite o recado...">
        <button class="btn-success" onclick="addRecado()">Adicionar</button>
        
        <h3>Gerenciar Recados</h3>
        <div id="admin-recados-list"></div>
        
        <button class="btn-primary" onclick="doLogout()">Sair</button>
        <button class="btn-warning" onclick="resetData()" style="margin-left: 10px;">Resetar Dados</button>
    </div>

    <script>
        // Configura√ß√£o
        const ADMIN_USER = 'admin';
        const ADMIN_PASS = '123456';
        const STORAGE_KEY = 'sistema_recados';
        
        let isLoggedIn = false;

        // Dados iniciais
        const initialData = [
            { id: 1, texto: "Bem-vindo ao sistema de recados!" },
            { id: 2, texto: "Use o login admin para gerenciar os recados." },
            { id: 3, texto: "Dados salvos localmente no seu navegador." }
        ];

        // Inicializa√ß√£o
        function init() {
            if (!localStorage.getItem(STORAGE_KEY)) {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(initialData));
            }
            loadRecados();
            checkLogin();
        }

        // Carregar recados
        function loadRecados() {
            try {
                const recados = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
                
                // √Årea p√∫blica
                const publicList = document.getElementById('public-recados-list');
                publicList.innerHTML = recados.length > 0 
                    ? recados.map(r => `<div class="recado-item"><span>${r.texto}</span></div>`).join('')
                    : '<p>Nenhum recado encontrado.</p>';
                
                // √Årea admin (se logado)
                if (isLoggedIn) {
                    renderAdminList(recados);
                }
                
                showMessage('public-message', `${recados.length} recados carregados`, 'success', 2000);
                
            } catch (error) {
                showMessage('public-message', 'Erro ao carregar recados', 'error');
            }
        }

        // Renderizar lista admin
        function renderAdminList(recados) {
            const adminList = document.getElementById('admin-recados-list');
            adminList.innerHTML = recados.length > 0 
                ? recados.map(r => `
                    <div class="recado-item">
                        <span>${r.texto}</span>
                        <div class="recado-actions">
                            <button class="btn-danger" onclick="deleteRecado(${r.id})">Remover</button>
                        </div>
                    </div>
                `).join('')
                : '<p>Nenhum recado para gerenciar.</p>';
        }

        // Adicionar recado
        function addRecado() {
            if (!isLoggedIn) {
                showMessage('admin-message', 'Fa√ßa login primeiro', 'error');
                return;
            }
            
            const texto = document.getElementById('new-recado-text').value.trim();
            if (!texto) {
                showMessage('admin-message', 'Digite um texto', 'error');
                return;
            }

            try {
                const recados = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
                const novoRecado = {
                    id: Date.now(), // ID √∫nico baseado no timestamp
                    texto: texto
                };
                
                recados.push(novoRecado);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(recados));
                
                document.getElementById('new-recado-text').value = '';
                loadRecados();
                showMessage('admin-message', 'Recado adicionado!', 'success', 2000);
                
            } catch (error) {
                showMessage('admin-message', 'Erro ao adicionar', 'error');
            }
        }

        // Remover recado
        function deleteRecado(id) {
            if (!isLoggedIn || !confirm('Confirmar remo√ß√£o?')) return;
            
            try {
                const recados = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
                const novosRecados = recados.filter(r => r.id !== id);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(novosRecados));
                
                loadRecados();
                showMessage('admin-message', 'Recado removido!', 'success', 2000);
                
            } catch (error) {
                showMessage('admin-message', 'Erro ao remover', 'error');
            }
        }

        // Login
        function doLogin() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username === ADMIN_USER && password === ADMIN_PASS) {
                isLoggedIn = true;
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('admin-panel').style.display = 'block';
                showMessage('login-message', '', 'success');
                loadRecados();
            } else {
                showMessage('login-message', 'Credenciais incorretas', 'error');
            }
        }

        // Logout
        function doLogout() {
            isLoggedIn = false;
            document.getElementById('login-form').style.display = 'block';
            document.getElementById('admin-panel').style.display = 'none';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            showMessage('login-message', 'Logout realizado', 'success');
        }

        // Verificar se j√° est√° logado
        function checkLogin() {
            // Poderia usar sessionStorage para manter login entre atualiza√ß√µes
            const savedLogin = sessionStorage.getItem('isLoggedIn');
            if (savedLogin === 'true') {
                isLoggedIn = true;
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('admin-panel').style.display = 'block';
            }
        }

        // Resetar dados
        function resetData() {
            if (confirm('Resetar todos os dados para os valores iniciais?')) {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(initialData));
                loadRecados();
                showMessage('admin-message', 'Dados resetados!', 'success', 2000);
            }
        }

        // Utilidades
        function showMessage(elementId, message, type, timeout = 0) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `message message-${type}`;
            
            if (timeout > 0) {
                setTimeout(() => {
                    element.textContent = '';
                    element.className = '';
                }, timeout);
            }
        }

        // Event listeners para Enter
        document.getElementById('username').addEventListener('keypress', e => {
            if (e.key === 'Enter') doLogin();
        });
        
        document.getElementById('password').addEventListener('keypress', e => {
            if (e.key === 'Enter') doLogin();
        });
        
        document.getElementById('new-recado-text').addEventListener('keypress', e => {
            if (e.key === 'Enter') addRecado();
        });

        // Iniciar
        init();
    </script>
</body>
</html>
